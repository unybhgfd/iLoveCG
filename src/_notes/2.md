## 辐射度量学
### 基本量
#### 能量 (Energy)
单位：焦耳，$J$，或者说，牛·米 $Nm$

波长为 $\lambda$ 的光子携带的能量 $Q$ 为:
$$
Q = \frac{h \cdot c}{\lambda}
$$

其中c是光速，单位为米每秒 $m/s$. h是普朗克常数，单位为焦耳·秒 $Js$

#### 辐射通量 (Radiant Flux， 功率)
单位: 瓦特$W$，即焦耳每秒 $J/s$

图形学中辐射通量 $\Phi$ 一般通过时间和能量的极限计算(即所谓的"瞬时辐射通量"):
$$
\Phi = \lim_{\Delta t \rightarrow 0} \frac{\Delta Q}{\Delta t}
$$

当然，也可以写成 $\Phi = \frac{dQ}{dt}$

比如，我们有一个光源，在2秒内发出的光能 $Q=3J$,
假设这个光源这两秒内发出能量的速度是相同的,
那么这个光源的辐射通量 $\Phi = 3J/2s=1.5W$

#### 辐射照度 / 辐射出射度 (Irradiance / Radiant Existence)
单位: 瓦特每平方米 $W / m^2$

给定一个有限的面积$A$, 我们可以定义该区域的平均功率密度为: $\frac{\Phi}{A}$

这个量要么是辐射照度(Irradiance) $E$,
即到达表面的通量的面积密度（受照面单位面积上的辐射通量）

要么是 辐射出射度(RadiantExistence) $M$,
即离开表面的通量的面积密度

有些时候这两个都可以叫辐射照度

#### 强度 (Intensity) / 辐射强度 (Radiant Intensity)
限制: 得是点光源

> 有些单位应该是非斜体的, 如球面度 $\text{sr}$, 这里使用默认字体, 如$sr$

单位: 瓦特每球面度 $W / sr$

有一个假想的单位球面, 圆心在点光源上,
记球面接收到的光功率为 $\Phi$ , 因为单位球面面积为 $4\pi sr$,
所以这个点光源的强度 $I = \frac{\Phi}{2 \pi sr}$

点光源每个方向发出的光功率一般是不同的,
所以我们对方向的微分圆锥的极限
(更通俗地说, 刚刚那个单位球面上一个很小的圆形区域)感兴趣,
所以公式要写成极限的形式:
$$
I = \lim_{\Delta \omega \rightarrow 0} \frac{\Delta \Phi}{\Delta \omega}
$$

#### 辐射亮度 (Radiance, 辐射率) (辐射度量学唯一的重点)
易混: 弧度是 *radian*, 现在说的叫 *radiance*

单位: 瓦特每平方米球面度 $W / (m^2 \cdot sr)$, $\frac{W}{m^2 sr}$

##### 定义1 (通量的角度)
辐射亮度$L$衡量单一光线的亮度, 相对于面积和立体角的功率密度, 即:
$$
L = \frac{d^2\Phi}{dA_{proj} \cdot d\omega}
$$

其中 $dA_{proj}$ (proj代表投影) 表示微分面积 $dA$
正交投影到 **与光线垂直的 (假想) 平面** 上的面积.

显然有 $dA_{proj} = dA \cdot \cos{\theta}$,
其中 $\theta$ 是 $dA$ 与 $dA_{proj}$ 的夹角

所以辐射亮度可以理解为, 当感兴趣的入射方向立体角 $d\omega$ 变得极小时,
以及表面的局部微分面积 $dA$ 也趋于极小时, 对表面上入射光的测量极限

##### 定义2 (辐照度角度)
辐 *照* 度 (或辐射出射度) 描述了点 $p$ 处的单位面积微分功率,
但没有考虑功率在不同方向分布是不同的.
辐射亮度进一步引入了方向维度, 测量了相对于立体角的辐照度 (或辐射出射度):
$$
L(p, \omega) = \lim_{
    \Delta\omega \rightarrow 0
}{
    \frac{\Delta E_{\omega}(p)}{\Delta\omega}
}
$$

其中, $E_{\omega}$ 表示在 **垂直于** 方向 $\omega$ 的表面上 的辐照度

##### 性质
定义1中的 $dA_{proj}$ 出现了 $\cos{\theta}$.
实际上, 辐射亮度的定义正好能消除兰伯特余弦定律中的 $\cos{\theta}$ 因子

辐射亮度在某种意义上是最基本的辐射度量量之一. 如果已知辐射亮度,
则所有其他辐射度量量都可以通过对辐射亮度在面积和方向上的积分计算得到

在真空中光线传播时辐射亮度保持不变

### 入射和出射光的辐射亮度函数 (Incident Radiance Function)
当光与场景中的表面交互时, 辐亮度函数 $L$ 通常在表面边界上不连续
(想象一块暗色的玻璃, 玻璃内部会很暗).

所以我们有表面上方和表面下方两个辐亮度函数:
$$
L^+(p, \omega) = \lim_{t \rightarrow 0^+}L(p+tn_p, \omega) \\
L^-(p, \omega) = \lim_{t \rightarrow 0^-}L(p+tn_p, \omega)
$$

其中 $n_p$ 是点 $p$ 处的表面法线

但是我们倾向于使用入射辐射亮度函数 $L_i$ 和出射辐射亮度函数 $L_o$:
- $\omega \cdot n_p > 0$ 时, $L_i(p, \omega) = L^+(p, -\omega)$, $L_o(p, \omega) = L^+(p, \omega)$
- $\omega \cdot n_p < 0$ 时, $L_i(p, \omega) = L^-(p, -\omega)$, $L_o(p, \omega) = L^-(p, \omega)$
- $\omega \cdot n_p$ 表示 $\omega$ 与 $n_p$ 的点积

### 基本量的光谱形式
单位: 原来的单位除以米 (因为波长的单位是米)

$$
X_{\lambda} = \lim_{\Delta\lambda \rightarrow 0}{\frac{\Delta X}{\Delta\lambda}}
$$
其中 $X$ 代表上面提到的一种基本量

### 使用辐射度量学积分 (辐射度量学在图形学中的部分应用)
略
